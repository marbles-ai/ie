{% extends "layout.html" %}
{% block title %}Marbles.AI: Solving Fake News{% endblock %}

<!-- D3.js -->
{% block includes %}
<script src="http://d3js.org/d3.v3.js"></script>
<script src="../static/js/d3.stretched.chord.js"></script>
<script src="../static/js/d3.layout.chord.sort.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.11.3.js"></script>

<!--<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-route.js"></script>-->

<style>
    body {
        font-family : 'Montserrat', Arial;
    }
    #nlInput:focus {
        outline : none;
    }
    #nlInput {
        border-width : 0px 0px 1px 0px;
        border-style : solid;
        border-color : #e0e0e0;
        width        : 100%;
        font-family  : 'Sorts Mill Goudy', Georgia;
        font-size    : 32px;
        //font-style   : italic;
        margin-bottom : 0.5em;
    }
    #response dd {
        margin-bottom : 1em;
    }
    #status {
        width : 100%;
        height : 4px;
    }
    .working {
        background-color : #fff0f0;
    }
    .working {
        height: 4px;
        width: 100%;
        position: relative;
        overflow: hidden;
        background-color: white;
    }
    .working:before{
        display: block;
        position: absolute;
        content: "";
        left: -200px;
        width: 200px;
        height: 4px;
        background-color: #2980b9;
        background-color: #94C0dc;
        animation: workinganim 2s linear infinite;
    }

    @keyframes workinganim {
        from {left: -200px; width: 30%;}
        50% {width: 30%;}
        70% {width: 70%;}
        80% { left: 50%;}
        95% {left: 120%;}
        to {left: 100%;}
    }
    .prompt {
        color : #d0d0d0;
        font-size : 14px;
        font-family : 'Montserrat', Arial;
    }
    .result-title {
        color : #d0d0ff;
        color : #d0d0d0;
        font-size : 14px;
        font-family : 'Montserrat', Arial;
        text-transform : uppercase;
    }
    .result-body {
        font-family  : 'Sorts Mill Goudy', Georgia;
        font-size : 24px;
    }
    .result {
        margin-top : 30px;
        padding-bottom : 30px;
    }
    .result:not(:last-child) {
        border-width : 0 0 1px 0;
        border-color : #f0f0f0;
        border-style : dotted;
    }
    #analyzers {
        font-size : 18px;
        /*text-transform : uppercase; */
    }
    #footer {
        font-size : 14px;
    }
</style>

{% endblock %}

{% block content %}

<div id="page-content-wrapper">
    <div class="container-fluid">
        <div class="col-sm-9">
            <div class="prompt">ENTER A SENTENCE:</div>
            <input type="text" id="nlInput" autofocus></input>
            <div id="status"></div>
            <div id="response"></div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}

<script>

    function toHtml(par, key, value){

        if (key == "Tokens"){
            var tokens = value.split(' ');
            var toplist = $("<ol>");
            console.log("Tokens: " + tokens);
            for(var i = 0; i < tokens.length; i++){
                var list = $("<li>");
                list.append(tokens[i]);
                toplist.append(list);
            }
            par.append(toplist.html());
            return;
        }
        if (key == "Constituency Tree"){
            var root = new TreeNode('PARA');
            for( var i = 0, len = value.length; i < len; ++i){
                var pt = parseCnfTree(value[i]);
                root.children.push(pt);
            }
            var can = $("<canvas>")[0];
            par.append(can);
            var ctx = can.getContext("2d");
            drawConstituentTree(can, ctx, root);
            return;
        }
    }

    $("#nlInput").keyup(function(e){
        var keycode = e.which;
        if(keycode == 13){
            var inputText = $("#nlInput").val();
            toHtml($("#response"),"Tokens",inputText);
        }
    });


</script>

{% endblock %}